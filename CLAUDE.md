# Claude å°ˆæ¡ˆæŒ‡å¼•

## æ ¸å¿ƒæ¦‚å¿µ

| ç¶­åº¦ | æ€§è³ª | ä½ç½® | ç”¨é€” |
|------|------|------|------|
| **STATE/** | ç³»çµ±ç¾æ³ | `STATE/` ç›®éŒ„ | AI äº†è§£ç³»çµ±ç‹€æ…‹ |
| **GitHub Issues** | ä»»å‹™è¿½è¹¤ | GitHub | ä»»å‹™ç®¡ç† + æ­·ç¨‹ |
| **.snapshots/** | ç¨‹å¼ç¢¼çµæ§‹ | `.snapshots/` ç›®éŒ„ | å¿«é€Ÿå®šä½æª”æ¡ˆ |

---

## æŒ‡ä»¤ç¸½è¦½

| æŒ‡ä»¤ | ç”¨é€” | ç”¢å‡º |
|------|------|------|
| `/plan "ä»»å‹™"` | é–‹å§‹è¦åŠƒ | Issue æˆ– Spike Issue |
| `/research #spike` | ç ”ç©¶æ¢ç´¢ | `STATE/developing/research-xxx.md` |
| `/design #spike` | è¨­è¨ˆè¦æ ¼ | `STATE/developing/xxx.md` |
| `/breakdown #spike` | æ‹†åˆ†ä»»å‹™ | Epic + å­ Issues |
| `/impl #123` | å¯¦ä½œ | ç¨‹å¼ç¢¼ |
| `/check #123` | é©—è­‰ | æ¸¬è©¦é€šé |
| `/close #123` | é—œé–‰ | merge + é—œé–‰ Issue + æ¸…ç† |

### æµç¨‹åœ–

```
                    /plan
                      â”‚
          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
          â–¼                     â–¼
    å°ä»»å‹™ Issue           Spike Issue
          â”‚                     â”‚
          â”‚                  /research
          â”‚                     â”‚
          â”‚                  /design
          â”‚                     â”‚
          â”‚                  /breakdown
          â”‚                     â”‚
          â”‚              â”Œâ”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”
          â–¼              â–¼      â–¼      â–¼
        /impl          /impl  /impl  /impl
          â”‚              â”‚      â”‚      â”‚
        /check         /check /check /check
          â”‚              â”‚      â”‚      â”‚
        /close         /close /close /close
          â”‚              â”‚      â”‚      â”‚
        å®Œæˆ            å®Œæˆ   å®Œæˆ   å®Œæˆ
                              â”‚
                         Epic é—œé–‰
```

---

## é–‹å§‹ä»»å‹™å‰

**å¿…è®€æ–‡ä»¶**ï¼š

```bash
# 1. ç³»çµ±ç¸½è¦½
cat STATE/overview.md

# 2. ç¨‹å¼ç¢¼çµæ§‹ï¼ˆæ‰¾æª”æ¡ˆä½ç½®ï¼‰
cat .snapshots/index.json

# 3. ç¾æœ‰æ¸¬è©¦ï¼ˆç¢ºèªè¦è·‘å“ªäº› E2Eï¼‰
cat STATE/tests.md
```

---

## é–‹ Issue æ™‚

```bash
# æŸ¥çœ‹å¯ç”¨ labels
gh label list
```

### Labels èªªæ˜

| Label | èªªæ˜ |
|-------|------|
| `type:bug` | ç¨‹å¼æœ‰éŒ¯èª¤ |
| `type:feature` | æ–°åŠŸèƒ½ |
| `type:enhancement` | æ”¹é€²ç¾æœ‰åŠŸèƒ½ |
| `type:test` | æ¸¬è©¦ç›¸é—œ |
| `type:refactor` | é‡æ§‹ |
| `type:chore` | ç¶­è­·å·¥ä½œ |
| `spike` | éœ€è¦ /design + /breakdown |
| `epic` | è¿½è¹¤å¤šå€‹å­ Issue |
| `status:ready` | å¯é–‹å§‹ |
| `status:in-progress` | é€²è¡Œä¸­ |
| `status:blocked` | è¢«å¡ä½ï¼ˆéœ€è¨»æ˜åŸå› ï¼‰ |
| `scope:frontend` | å‰ç«¯ |
| `scope:backend` | å¾Œç«¯ |

**ç™¼ç¾å•é¡Œæœ¬è³ªä¸åŒæ™‚**ï¼Œç«‹å³æ›´æ–° label ä¸¦è¨»æ˜åŸå› ã€‚

---

## TDD è¦å‰‡

### è¨­è¨ˆéšæ®µï¼ˆ/designï¼‰

1. **å®šç¾©é©—æ”¶æ¢ä»¶**ï¼šæ˜ç¢ºåˆ—å‡ºã€Œä»€éº¼æƒ…æ³ç®—å®Œæˆã€
2. **å®šç¾©æ¸¬è©¦æ¡ˆä¾‹**ï¼šå…·é«”çš„æ¸¬è©¦å ´æ™¯ï¼ŒåŒ…å«è¼¸å…¥å’Œé æœŸè¼¸å‡º
3. **å®šç¾©æ¸¬è©¦é¡å‹**ï¼š
   - å–®å…ƒæ¸¬è©¦ï¼šç´”é‚è¼¯ã€è¨ˆç®—ã€è½‰æ›
   - æ•´åˆæ¸¬è©¦ï¼šService + Repository + DB
   - E2E æ¸¬è©¦ï¼šå®Œæ•´ API æµç¨‹

### æ‹†åˆ†éšæ®µï¼ˆ/breakdownï¼‰

æ¯å€‹ Issue å¿…é ˆåŒ…å«ï¼š
- **é©—æ”¶æ¢ä»¶**ï¼šå¾ /design ç¹¼æ‰¿
- **æ¸¬è©¦æ¡ˆä¾‹**ï¼šå…·é«”è¦å¯«å“ªäº›æ¸¬è©¦
- **æ¸¬è©¦æª”æ¡ˆ**ï¼šé è¨ˆå»ºç«‹æˆ–ä¿®æ”¹çš„æ¸¬è©¦æª”æ¡ˆè·¯å¾‘

### å¯¦ä½œéšæ®µï¼ˆ/implï¼‰

**åš´æ ¼åŸ·è¡Œç´…ç‡ˆ â†’ ç¶ ç‡ˆ â†’ é‡æ§‹**ï¼š

1. **å…ˆå¯«æ¸¬è©¦**ï¼ˆç´…ç‡ˆï¼‰ï¼šæ ¹æ“š Issue å®šç¾©çš„æ¸¬è©¦æ¡ˆä¾‹
2. **è·‘æ¸¬è©¦ç¢ºèªå¤±æ•—**ï¼šç¢ºä¿æ¸¬è©¦æœ‰æ•ˆ
3. **å¯¦ä½œç¨‹å¼ç¢¼**ï¼šè®“æ¸¬è©¦é€šéï¼ˆç¶ ç‡ˆï¼‰
4. **é‡æ§‹**ï¼šæ”¹å–„ç¨‹å¼ç¢¼å“è³ªï¼Œæ¸¬è©¦ä»ç¶ ç‡ˆ
5. **Commit**ï¼šæ¯å®Œæˆä¸€å€‹å¾ªç’°å°± commit

### é©—è­‰éšæ®µï¼ˆ/checkï¼‰

- è·‘ Issue å®šç¾©çš„æ‰€æœ‰æ¸¬è©¦
- ç¢ºèªæ¸¬è©¦è¦†è“‹ç‡ç¬¦åˆé æœŸ

### åŸå‰‡

- æ¸¬è©¦æ˜¯ã€ŒæŒ‰æ¨¡çµ„ã€ä¸æ˜¯ã€ŒæŒ‰ Issueã€
- æƒ³ä¸æ¸…æ¥šæ€éº¼æ¸¬è©¦ = æ¢ä»¶ä¸å¤ å…·é«”ï¼Œè¦å›åˆ° /design é‡æ–°å®šç¾©
- æ²’æœ‰æ¸¬è©¦æ¡ˆä¾‹çš„ Issue ä¸èƒ½é–‹å§‹ /impl

---

## Contract è¦å‰‡

- `STATE/api-contract.yaml` æ˜¯ API å”¯ä¸€ä¾†æº
- é–‹ç™¼ä¸­çš„ contract åœ¨ `STATE/developing/xxx.md`
- æ”¹ API å…ˆæ”¹ contractï¼Œå†æ”¹ç¨‹å¼ç¢¼
- `/check` æ™‚ Contract æ¸¬è©¦é©—è­‰ä¸€è‡´æ€§

---

## STATE æ–‡ä»¶æ›´æ–°è¦å‰‡

STATE æ–‡ä»¶å¿…é ˆèˆ‡ç¨‹å¼ç¢¼ä¿æŒåŒæ­¥ï¼Œä»¥ä¸‹æ˜¯å„éšæ®µçš„æ›´æ–°è²¬ä»»ï¼š

### /design éšæ®µ

| æ–‡ä»¶ | æ›´æ–°æ™‚æ©Ÿ |
|------|---------|
| `api-contract.yaml` | æ–°å¢æˆ–ä¿®æ”¹ API endpoints |
| `overview.md` | æ–°å¢æ ¸å¿ƒçµ„ä»¶ã€æ”¹è®Šæ¶æ§‹è¨­è¨ˆ |
| `decisions.md` | åšå‡ºé‡è¦æŠ€è¡“æ±ºç­– |

### /close éšæ®µ

| æ–‡ä»¶ | æª¢æŸ¥é …ç›® |
|------|---------|
| `modules.md` | æ–°å¢çš„ Controllerã€Serviceã€Repositoryã€Hookã€Page |
| `tests.md` | æ–°å¢çš„ E2E æ¸¬è©¦ |

### é‡æ§‹å¾Œ

| æ–‡ä»¶ | æ›´æ–°æ™‚æ©Ÿ |
|------|---------|
| `overview.md` | ç§»å‹•æª”æ¡ˆä½ç½®ã€æ”¹è®Šç›®éŒ„çµæ§‹ |
| `modules.md` | é‡æ–°å‘½åæˆ–ç§»å‹•æ¨¡çµ„ |

### åŸå‰‡

- **å…ˆæ”¹æ–‡ä»¶ï¼Œå†æ”¹ç¨‹å¼ç¢¼**ï¼ˆContract-firstï¼‰
- **é—œé–‰ Issue å‰å¿…é ˆæª¢æŸ¥** STATE æ–‡ä»¶æ˜¯å¦éœ€è¦æ›´æ–°
- ç™¼ç¾æ–‡ä»¶èˆ‡ç¨‹å¼ç¢¼ä¸ç¬¦æ™‚ï¼Œ**ç«‹å³ä¿®æ­£**

---

## è³‡æ–™åº«æ“ä½œè¦å‰‡

> æ ¹æ“šå°ˆæ¡ˆä½¿ç”¨çš„ ORM/è³‡æ–™åº«èª¿æ•´æ­¤æ®µè½

### ç¦æ­¢çš„æ“ä½œ

ä»¥ä¸‹æ“ä½œæœƒå°è‡´è³‡æ–™éºå¤±ï¼Œ**ä»»ä½•æƒ…æ³ä¸‹éƒ½ç¦æ­¢åŸ·è¡Œ**ï¼š

- æ¸…ç©ºæ•´å€‹è³‡æ–™åº«
- ç ´å£æ€§ SQLï¼ˆDROP TABLE, TRUNCATE ç­‰ï¼‰
- ç„¡ WHERE æ¢ä»¶çš„ DELETE

### éœ€è¦ç”¨æˆ¶ç¢ºèªçš„æ“ä½œ

ä»¥ä¸‹æ“ä½œå¯èƒ½å½±éŸ¿ç¾æœ‰è³‡æ–™ï¼Œ**å¿…é ˆå…ˆè©¢å•ç”¨æˆ¶ç¢ºèª**ï¼š

- åˆªé™¤ columnï¼ˆæœƒéºå¤±è©²æ¬„ä½æ‰€æœ‰è³‡æ–™ï¼‰
- åˆªé™¤ tableï¼ˆæœƒéºå¤±è©²è¡¨æ ¼æ‰€æœ‰è³‡æ–™ï¼‰
- ä¿®æ”¹ column é¡å‹ï¼ˆå¯èƒ½å°è‡´è³‡æ–™è½‰æ›å¤±æ•—ï¼‰
- é‡æ–°å‘½å column/tableï¼ˆå¯èƒ½ç ´å£ç¾æœ‰ç¨‹å¼ç¢¼ï¼‰

### Production ç’°å¢ƒè¦å‰‡

1. **çµ•å°ç¦æ­¢**ç›´æ¥æ“ä½œ production è³‡æ–™åº«
2. æ‰€æœ‰è®Šæ›´å¿…é ˆé€é migration æª”æ¡ˆ
3. Migration æª”æ¡ˆå¿…é ˆç¶“é code review
4. éƒ¨ç½²å‰å¿…é ˆåœ¨ staging ç’°å¢ƒæ¸¬è©¦
5. é‡å¤§è®Šæ›´éœ€è¦è³‡æ–™å‚™ä»½è¨ˆç•«

---

## åˆ†å·¥åˆ¤æ–·

**å€¼å¾—åˆ†çš„æ¢ä»¶**ï¼ˆå¿…é ˆåŒæ™‚æ»¿è¶³ï¼‰ï¼š

| æ¢ä»¶ | èªªæ˜ |
|------|------|
| çœŸæ­£ç¨ç«‹ | å¯ä»¥å„è‡ªå®Œæˆ |
| ä¸è¡çª | ä¸æ”¹åŒä¸€å€‹æª”æ¡ˆ |
| æœ‰æ™‚é–“æ•ˆç›Š | åˆ†äº†æ›´å¿« |

**ä¸å€¼å¾—åˆ†çš„æƒ…æ³**ï¼šä»»å‹™å¾ˆå°ã€å¼·ä¾è³´ã€æ”¹åŒæª”æ¡ˆ

---

## éšæ®µåˆ†é›¢

- è¨­è¨ˆã€å¯¦ä½œã€é©—è­‰åˆ†é–‹å°è©±
- æ¯å€‹ command åªè®€å¿…è¦çš„æ–‡ä»¶
- `/clear` å¾Œç”¨ command æ¥çºŒ

### /clear å¾Œå¦‚ä½•æ¥çºŒ

| è³‡è¨Š | ä¾†æº |
|------|------|
| ä»»å‹™è³‡è¨Š | `gh issue view #123` |
| æœ¬åœ°é€²åº¦ | `.claude/current-task.md` |
| ç³»çµ±è¦æ ¼ | `STATE/` ç›®éŒ„ |

---

## èªè¨€åŸå‰‡

**æ€è€ƒç”¨è‹±æ–‡ï¼Œæºé€šç”¨ç¹é«”ä¸­æ–‡**

æ‰€æœ‰ç”¨æˆ¶æœƒçœ‹åˆ°çš„å…§å®¹ä½¿ç”¨ç¹é«”ä¸­æ–‡ï¼š
- å°è©±ã€è¨»è§£ã€Commitã€æ–‡ä»¶ã€Issue/PR

> æ ¹æ“šåœ˜éšŠèªè¨€ç¿’æ…£èª¿æ•´æ­¤æ®µè½

---

## Git å·¥ä½œæµç¨‹

### åˆ†æ”¯å‘½å

```
issue/123-fix-login-error    # ä¸€èˆ¬ Issue
wp/001-feature-name          # Epic çš„å­ä»»å‹™
```

### Commit æ ¼å¼

```
<å‹•ä½œ>: <ç°¡çŸ­æè¿°> (#123)

- è®Šæ›´é …ç›® 1
- è®Šæ›´é …ç›® 2

ğŸ¤– Generated with [Claude Code](https://claude.com/claude-code)
Co-Authored-By: Claude <noreply@anthropic.com>
```

### å®Œæˆå¾Œ

```bash
# Merge åˆ° develop
git checkout develop && git pull
git merge issue/123-xxx --no-ff
git push origin develop

# é—œé–‰ Issue
gh issue close 123
```

---

## å¿«é€Ÿåƒè€ƒ

### é—œéµæ–‡ä»¶ä½ç½®

| æ–‡ä»¶ | ä½ç½® |
|------|------|
| ç³»çµ±ç¸½è¦½ | `STATE/overview.md` |
| API Contract | `STATE/api-contract.yaml` |
| åŠŸèƒ½è¦æ ¼ | `STATE/spec.md` |
| æ¸¬è©¦æ¸…å–® | `STATE/tests.md` |
| æ±ºç­–è¨˜éŒ„ | `STATE/decisions.md` |
| é–‹ç™¼ä¸­è¦åŠƒ | `STATE/developing/` |
| ç¨‹å¼ç¢¼çµæ§‹ | `.snapshots/index.json` |
| ç•¶å‰ä»»å‹™ | `.claude/current-task.md` |

### é—œéµæŒ‡ä»¤

```bash
# Issue ç®¡ç†
gh issue list
gh issue view 123
gh label list

# Git
git checkout -b issue/123-xxx
git worktree add ../${PROJECT_NAME}-123 -b issue/123-xxx
```
